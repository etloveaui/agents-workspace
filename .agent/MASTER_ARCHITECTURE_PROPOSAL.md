# 마스터 아키텍처 제안: 지능형 컨텍스트 공유 에이전트 시스템

**문서 목적:** 모든 AI 에이전트(Gemini, Claude, Codex 등)가 유기적으로 협력하는 통합 개발 환경의 최종 비전과 핵심 요구사항을 정의합니다. 이 문서는 모든 개별 에이전트 구현의 기준이 되는 '절대적인 제안서' 역할을 합니다.

## 1. 핵심 비전 (Core Vision)

하나의 워크스페이스 내에서 다수의 AI 에이전트가 각자의 전문성을 발휘하면서도, 서로의 작업 내용을 실시간으로 인지하고 컨텍스트를 공유하여, 사용자가 반복적인 지시를 내리지 않아도 되는 지능적이고 효율적인 개발 환경을 구축한다.

## 2. 주요 요구사항 (Key Requirements)

### 2.1. 계층적 컨텍스트 로딩 (Layered Context Loading)
모든 에이전트는 작업을 시작할 때 다음 3단계에 걸쳐 컨텍스트를 계층적으로 로드해야 한다. 이를 통해 유연성과 일관성을 동시에 확보한다.

1.  **프로젝트별 오버라이드 (Project-specific Override):** 프로젝트 루트에 위치한 에이전트별 마크다운 파일 (`gemini.md` 등). 현재 프로젝트에만 적용되는 가장 우선순위 높은 지침을 담는다.
2.  **공유 컨텍스트 (Shared Context):** 모든 에이전트가 공유하는 단일 마크다운 파일 (`.agent/SHARED_CONTEXT.md`). 프로젝트의 공통 규칙, 목표, 가이드라인을 담는다.
3.  **핵심 정체성 (Core Identity):** 각 에이전트의 고유한 설정 폴더 (`.gemini/` 등)에 위치한 마크다운 파일. 에이전트의 기본적인 역할, 능력, 제한사항 등 고유의 정체성을 담는다.

### 2.2. 동적 상태 인지 (Dynamic State Awareness)
에이전트는 다른 에이전트나 사용자가 워크스페이스에서 수행한 작업(파일 생성/수정, 명령어 실행 등)의 이력을 인지해야 한다.

- **구현 아이디어:** '공유 워크스페이스 저널' (`JOURNAL.jsonl`) 시스템을 도입하여, 모든 이벤트를 기록하고 에이전트가 작업 시작 전 최근 이벤트를 참조하도록 한다.

### 2.3. 통합 관리 (Unified Management)
모든 에이전트의 실행, 설정, 컨텍스트 동기화는 중앙화된 방식으로 관리되어야 한다.

- **구현 아이디어:** `package.json`의 `npm scripts`를 활용하여, `npm run <agent>` 형식의 일관된 실행 방식을 제공하고, 컨텍스트 동기화 및 설정 배포를 위한 헬퍼 스크립트를 둔다.

## 3. 최종 목표

- **마찰 없는 개발 경험:** 개발자는 개별 에이전트의 복잡한 설정이나 상태 동기화를 신경 쓸 필요 없이, 문제 해결 자체에만 집중할 수 있다.
- **시너지 창출:** 각기 다른 강점을 가진 에이전트들이 서로의 작업을 보완하고 협력하여, 단일 에이전트로는 해결하기 어려운 복잡한 작업을 수행할 수 있게 한다.
- **시스템 확장성:** 향후 새로운 에이전트가 추가되더라도, 정의된 아키텍처에 따라 쉽게 통합될 수 있는 유연한 구조를 가진다.
