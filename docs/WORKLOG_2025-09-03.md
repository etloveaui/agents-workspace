# Worklog — 2025-09-03

## Summary
- Made the project portable across different usernames/PCs by removing hardcoded absolute paths and switching to relative roots and npx-based MCP servers.
- Added automatic trust provisioning (Codex/Gemini) via PowerShell and wired it to run on VS Code folder open.
- Rewrote and corrected documentation to reflect the actual repo configuration and runtime behavior.

## Changes
- MCP
  - Added custom MCP server: `servers/hello-mcp/` (Node, echo/time tools).
  - `.mcp.json`: switched `filesystem` to `npx @modelcontextprotocol/server-filesystem` with roots `., .claude, .gemini`; registered `hello-mcp`.
- Codex
  - `.codex/config.toml`: replaced hardcoded roots with relative; documented approval/sandbox policies; kept `never + workspace-write`.
  - Auto-trust: created `scripts/ensure-trust.ps1` and VS Code auto task to run on folder open.
- Gemini
  - `.gemini/settings.json`: changed filesystem roots to relative (`., .claude, .codex`).
  - Will maintain trustedFolders via the auto-trust script.
- VS Code
  - `.vscode/tasks.json`: task “SuperCodex: ensure trust” (runOn: folderOpen).
  - `.vscode/settings.json`: allow automatic tasks.
- Docs
  - Rewrote: `docs/CODEX_CLI_SUMMARY.md` (accurate config, MCP, modes/prompts, runtime notes).
  - Updated: `PROJECT_DESIGN.md` (removed non-existent setup scripts, realistic flows, runtime policy note, toned claims, MCP details).

## Validation
- Verified MCP servers start: hello-mcp, filesystem (via npx), sequential-thinking, context7, playwright; serena binary path works on current machine.
- Confirmed filesystem roots resolve relative to repo.

## Open Items / Options (awaiting decision)
- Serena path portability: switch to PATH-based command or leave as-is.
- Add macOS/Linux variant `scripts/ensure-trust.sh` and VS Code OS-specific tasks.
- Add Quick Start doc section referencing the auto-trust task.

## How to Use (per machine)
- Open the repo in VS Code via `code .` → auto task runs and provisions trust.
- Or run manually: `powershell -NoProfile -ExecutionPolicy Bypass -File scripts/ensure-trust.ps1`.
- Use Codex/Claude/Gemini; MCP tools available immediately.

